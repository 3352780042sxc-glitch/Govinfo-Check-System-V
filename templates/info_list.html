{% extends 'base.html' %}

{% block title %}舆情分析系统 - 信息列表{% endblock %}

{% block content %}
<div class="layui-card">
    <div class="layui-card-header">
        <div class="layui-row">
            <div class="layui-col-md6">信息列表</div>
            <div class="layui-col-md6 layui-text-right">
                <a href="{{ url_for('info_add') }}" class="layui-btn">
                    <i class="layui-icon layui-icon-add-circle"></i> 添加信息
                </a>
            </div>
        </div>
    </div>
    <div class="layui-card-body">
        <table class="layui-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>信息标题</th>
                    <th>信息类别</th>
                    <th>信息状态</th>
                    <th>创建时间</th>
                    <th>更新时间</th>
                    <th>操作</th>
                </tr>
            </thead>
            <tbody>
                {% if infos %}
                    {% for info in infos %}
                    <tr>
                        <td>{{ info.id }}</td>
                        <td>{{ info.title }}</td>
                        <td>{{ info.category }}</td>
                        <td>
                            <span class="layui-badge {{ 'layui-bg-green' if info.status == '已处理' else 'layui-bg-orange' }}">
                                {{ info.status }}
                            </span>
                        </td>
                        <td>{{ info.created_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                        <td>{{ info.updated_at.strftime('%Y-%m-%d %H:%M:%S') }}</td>
                        <td>
                            <a href="{{ url_for('info_detail', info_id=info.id) }}" class="layui-btn layui-btn-xs layui-btn-primary">
                                <i class="layui-icon layui-icon-list"></i> 查看
                            </a>
                            <a href="{{ url_for('info_edit', info_id=info.id) }}" class="layui-btn layui-btn-xs layui-btn-normal">
                                <i class="layui-icon layui-icon-edit"></i> 编辑
                            </a>
                            <a href="{{ url_for('info_delete', info_id=info.id) }}" class="layui-btn layui-btn-xs layui-btn-danger" onclick="return confirm('确定要删除这条信息吗？')">
                                <i class="layui-icon layui-icon-delete"></i> 删除
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="7" class="layui-text-center">暂无信息</td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
layui.use('table', function(){
    var table = layui.table;
    
    // 渲染表格
    table.render({
        elem: '.layui-table',
        even: true,  // 开启隔行背景
        page: true   // 开启分页
    });
});
</script>
{% endblock %}
